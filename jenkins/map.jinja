{% import_yaml "jenkins/defaults.yaml" as default_settings %}

{% set os_family_map = salt['grains.filter_by']({
    'Arch': {
        'netcat_pkg': 'netcat-openbsd',
    },
    'Debian': {
        'netcat_pkg': 'netcat-openbsd',
    },
    'RedHat': {
        'netcat_pkg': 'nc',
    },
    'Suse': {
        'netcat_pkg': 'netcat-openbsd',
    },
  }, grain="os_family", merge=salt['pillar.get']('jenkins:lookup'))
%}

{% do default_settings.jenkins.update(os_family_map) %}

{% set jenkins = salt['pillar.get'](
    'jenkins',
    default=default_settings.jenkins,
    merge=True)
%}


